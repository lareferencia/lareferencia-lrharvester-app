# ==============================================================================
# FLOWABLE ENGINE CONFIGURATION
# ==============================================================================

# ------------------------------------------------------------------------------
# Process Deployment
# ------------------------------------------------------------------------------

# Location of BPMN process files (relative to config dir or classpath)
flowable.process-definition-location-prefix=file:config/processes/

# File suffix for BPMN files
flowable.process-definition-location-suffixes=**.bpmn20.xml,**.bpmn

# Auto-deploy processes on startup
flowable.check-process-definitions=true

# ------------------------------------------------------------------------------
# Database Configuration
# ------------------------------------------------------------------------------

# Flowable datasource (separate database, same server and credentials as main)
# 
# IMPORTANT: Uncomment the appropriate configuration based on your database type.
# Flowable will use the same server and credentials as the main datasource,
# but with a separate database to isolate workflow data.

# ------------------------------------------------------------------------------
# PostgreSQL (Default)
# ------------------------------------------------------------------------------
# IMPORTANT: Spring does not support ${property}_suffix concatenation syntax.
# The URL must be specified explicitly.
# 
# If you change spring.datasource.url, remember to update this URL as well.

flowable.datasource.jdbc-url=jdbc:postgresql://localhost:5432/lrharvester_flowable
flowable.datasource.username=${spring.datasource.username}
flowable.datasource.password=${spring.datasource.password}

# ------------------------------------------------------------------------------
# H2 (Development/Testing)
# ------------------------------------------------------------------------------
# Uncomment for H2 and comment PostgreSQL above:
# flowable.datasource.jdbc-url=jdbc:h2:file:${store.basepath}/lrharvester_flowable;DB_CLOSE_DELAY=-1
# flowable.datasource.username=${spring.datasource.username}
# flowable.datasource.password=${spring.datasource.password}

# ------------------------------------------------------------------------------
# SQLite (Development/Testing)
# ------------------------------------------------------------------------------
# Uncomment for SQLite and comment PostgreSQL above:
# flowable.datasource.jdbc-url=jdbc:sqlite:${store.basepath}/lrharvester_flowable.db
# flowable.datasource.username=${spring.datasource.username}
# flowable.datasource.password=${spring.datasource.password}

# Driver is auto-detected from jdbc-url
# Only set explicitly if auto-detection fails:
# flowable.datasource.driver-class-name=${spring.datasource.driver-class-name}

# Flowable connection pool settings (separate from main pool)
flowable.datasource.hikari.minimum-idle=2
flowable.datasource.hikari.maximum-pool-size=10
flowable.datasource.hikari.connection-timeout=30000
flowable.datasource.hikari.idle-timeout=600000
flowable.datasource.hikari.max-lifetime=1800000

# Automatically create/update Flowable tables on startup
# Set to 'false' in production once tables are created
flowable.database-schema-update=true

# ------------------------------------------------------------------------------
# Async Executor Configuration
# ------------------------------------------------------------------------------

# Enable async executor for background jobs
flowable.async-executor-activate=true

# Thread pool configuration
flowable.async-executor.core-pool-size=2
flowable.async-executor.max-pool-size=10
flowable.async-executor.queue-capacity=100

# Graceful shutdown configuration (allows clean exit from shell)
flowable.async-executor.shutdown-wait-time=5000
flowable.async-executor.thread-pool-shutdown-timeout=5000

# ------------------------------------------------------------------------------
# ID Generator
# ------------------------------------------------------------------------------

# Use UUID for process instance IDs
flowable.id-generator=uuid

# ------------------------------------------------------------------------------
# REST API (if needed)
# ------------------------------------------------------------------------------

# Disable Flowable REST API (we use our own WorkflowService)
flowable.rest-api-enabled=true
